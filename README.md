Проект: AI-помощник (Telegram + VK) с локальным кешем в OpenSearch
Команды: КиберМыши
Участники Команды:
   Запьянцев Олег
   Вепрева Анастасия
   Герасимова Анна
   Кирьянова Полина
   Грудин Артём

Ссылка на презентацию команды: https://docs.google.com/presentation/d/1EqhkRt2Kyo2l9nZXY36SL_NuDZ-PJLKsHI3SMLSvDfU/edit?usp=sharing
Также презентация есть в саммом гите - сбер.pptx

Обзор
- В корне проекта находится бот, работающий в Telegram и VK (ВКонтакте), предназначенный для помощи жителям и гостям Санкт-Петербурга.
- Основной источник данных — локальный индекс OpenSearch. Бот сначала ищет информацию в локальном индексе; если подходящих данных нет — запускается фоновая загрузка/парсинг и пользователю предлагается повторить запрос через короткое время.
- Документы в OpenSearch считаются актуальными в течение 30 дней (это хранится в метаданных). При устаревании данные обновляются в фоне.

Основные файлы
- `spb_bot/bot.py` — реализация Telegram-бота и обработчики меню.
- `spb_bot/vk_bot.py` — реализация VK-бота и настройка панели кнопок.
- `spb_bot/submenu.py` — клавиатуры для Telegram (транспорт, госуслуги, соцподдержка, мероприятия, учреждения).
- `spb_bot_opensearch/opensearch_manager.py` — помощник для OpenSearch: создание индекса, массовая загрузка, поиск, метаданные и логика обновления.
- `ai_engine.py` — интеграция с LLM; функция `ask_agent()` используется ботами для генерации ответов с учётом контекста из OpenSearch.

Краткая инструкция по запуску
1) Убедитесь, что запущен OpenSearch (по умолчанию http://localhost:9200). Можно поднять через `docker-compose`:

```powershell
docker compose up -d --build opensearch
```
или
просто нажать на файл docker-compose.yml и запустить

2) Один раз инициализируйте индекс и загрузите данные:
--этот шаг пропустить можно
```powershell
python spb_bot_opensearch\initialize.py
```
-- это если их нету, так не надо это можно опустить

3) Запустите нужные боты (или оба вместе):

Telegram только:
```powershell
python spb_bot\bot.py
```

VK только:
```powershell
python spb_bot\vk_bot.py
```

Оба одновременно (скрипт в `spb_bot/run_both.py`):
```powershell
python spb_bot\run_both.py
```

Примечания
- Если вы измените метки в `spb_bot/submenu.py`, нужно убедиться, что обработчики в `spb_bot/bot.py` и `spb_bot/vk_bot.py` соответствуют этим меткам.
- При отсутствии результатов в локальном индексе бот запускает фоновую загрузку данных и просит пользователя повторить запрос через минуту.
- Метаданные индекса (`spb_bot_opensearch/index_metadata.json`) содержат время последнего обновления и используются для реализации политики «30 дней свежести».

БОТ в тг - https://t.me/SpbHelpperBot
Бот в вк - https://vk.com/club190907163 - но надо подписаться и нажать на кнопку в чате привет
